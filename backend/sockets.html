<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<script src="https://unpkg.com/htmx.org@1.9.5"
		integrity="sha384-xcuj3WpfgjlKF+FXhSQFQ0ZNr39ln+hwjN3npfM9VBnUskLolQAcN80McRIVOPuO"
		crossorigin="anonymous"></script>
	<script src="https://unpkg.com/htmx.org/dist/ext/ws.js"></script>

	<title>Sockets!?</title>
</head>

<body>
	<h1>Sockets!</h1>

	<div hx-ext="ws" ws-connect="/ws" hx-target="#notifications" hx-trigger="load">
		<div id="notifications">
			New message received
		</div>

		<form id="form" ws-send>
			<input type="hidden" name="template" value="chat_message">
			<input name="message">
			<input type="submit" value="submit">
		</form>
	</div>

	<button id="send-socket">Send</button>

	<div id="output">

	</div>

	<script>

		// url = 'ws://localhost:4040/ws';
		// c = new WebSocket(url);

		// send = function (data) {
		// 	c.send(data)
		// }

		// c.onmessage = function (msg) {
		// 	console.log("Message received")

		// 	document.querySelector("#output").append(msg.data)
		// 	console.log(msg)
		// }

		// document.querySelector("#send-socket").onclick = function () {
		// 	send(JSON.stringify({ "game": 1, "action": "joined" }))
		// }

		// c.onopen = function () {
		// 	send(JSON.stringify({ "game": 1, "action": "joined" }))
		// }
	</script>

</body>

</html>